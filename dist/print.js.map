{"version":3,"sources":["../src/print.js"],"names":[],"mappings":"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","file":"print.js","sourcesContent":["/**\n * Print Part Of A Web Page\n * \n */\n\nconst defaults = {\n    debug: false, // show the iframe for debugging\n    importCSS: true, // import parent page css\n    importStyle: false, // import style tags\n    printContainer: true, // print outer container/$.selector\n    loadCSS: \"\", // load an additional css file - load multiple stylesheet with an array []\n    pageTitle: \"\", // add title to print page\n    removeInline: true, // remove all inline styles\n    printDelay: 333, // variable print delay\n    svg: false // import parent page svg icon\n}\n\nclass Print {\n\n    constructor(element, options) {\n        this.element = element\n        this.opt = Object.assign(defaults, options)\n        this.init()\n    }\n\n    init() {\n        this.iframe = this.createIframe()\n        this.expose()\n        this.print()\n    }\n\n    /**\n     * create frame for print\n     * @return\n     */\n    createIframe() {\n        const suffix = (new Date()).getTime()\n        const strFrameName = `print-${suffix}`\n        \n        let pIframe = document.createElement('iframe')\n\n        pIframe.name = 'printIframe'\n        pIframe.id = strFrameName\n\n        if (window.location.hostname !== document.domain && navigator.userAgent.match(/msie/i)) {\n            // Ugly IE hacks due to IE not inheriting document.domain from parent\n            // checks if document.domain is set by comparing the host name against document.domain\n            var iframeSrc = \"javascript:document.write(\\\"<head><script>document.domain=\\\\\\\"\" + document.domain + \"\\\\\\\";</script></head><body></body>\\\")\"\n\n            pIframe.className = 'MSIE'\n            pIframe.src = iframeSrc\n        }\n\n        document.body.appendChild(pIframe)\n\n        return pIframe\n    }\n\n    /**\n     * expose options\n     * @return\n     */\n    expose() {\n\n        let opt = this.opt,\n            iframe = this.iframe\n\n        // iframe dom\n        let idoc = iframe.contentDocument || iframe.contentWindow.document,\n            ihead = idoc.head,\n            ibody = idoc.body\n\n        // iframe style\n        iframe.style.position = 'absolute'\n        iframe.style.top = '0'\n        iframe.style.with = '100%'\n        iframe.style.height = '100%'\n\n        // hide iframe if not in debug mode\n        if (!opt.debug) {\n            iframe.style.display = 'none'\n        }\n\n        // add base tag to ensure elements use the parent domain\n        let b = document.createElement('base')\n        b.href = document.location.protocol + '//' + document.location.host\n        ihead.appendChild(b)\n\n        // import page svg\n        if (opt.svg) {\n            let c = document.body.children\n            for (let s = 0; s < c.length; s++) {\n                if (c[s].nodeName === 'svg')\n                    ihead.appendChild(c[s].cloneNode(true))\n            }\n        }\n\n        // import page stylesheet\n        if (opt.importCSS) {\n            let ls = document.getElementsByTagName('link')\n            for (let l = 0; l < ls.length; l++) {\n                if (ls[l].rel === 'stylesheet') {\n                    let ol = document.createElement('link')\n                    ol.type = 'text/css'\n                    ol.rel = 'stylesheet'\n                    ol.href = ls[l].href\n                    ol.media = ls[l].media || 'all'\n                    ihead.appendChild(ol)\n                }\n            }\n        }\n\n        // import style tags\n        if (opt.importStyle) {\n            let sty = document.getElementsByTagName('style')\n            for (let is = 0; is < sty.length; is++) {\n                ihead.appendChild(sty[is].cloneNode(true))\n            }\n        }\n\n        //add title of the page\n        if (opt.pageTitle) {\n            let t = document.createElement('title')\n            t.innerText = opt.pageTitle\n            ihead.appendChild(t)\n        }\n\n        // import additional stylesheet(s)\n        if (opt.loadCSS) {\n            if (Array.isArray(opt.loadCSS)) {\n                a.forEach((href) => {\n                    let ll = document.createElement('link')\n                    ll.type = 'text/css'\n                    ll.rel = 'stylesheet'\n                    ll.href = href\n                    ihead.appendChild(ll)\n                })\n            } else {\n                let ll = document.createElement('link')\n                ll.type = 'text/css'\n                ll.rel = 'stylesheet'\n                ll.href = opt.loadCSS\n                ihead.appendChild(ll)\n            }\n        }\n\n        // grab selector as container\n        if (opt.printContainer) {\n            ibody.appendChild(this.element.cloneNode(true))\n        } else {\n            for (let ie = 0; ie < this.element.children.length; ie++) {\n                ibody.appendChild(this.element.children[ie].cloneNode(true))\n            }\n        }\n\n        // remove inline styles\n        if (opt.removeInline) {\n            let tags = ibody.getElementsByTagName('*')\n            for (let it = 0; it < tags; it++) {\n                it.setAttribute('style', '')\n            }\n        }\n    }\n\n    print() {\n        let opt = this.opt,\n            iframe = this.iframe\n\n        // print\n        setTimeout(() => {\n            if(/MSIE/.test(iframe.className)){\n                // check if the iframe was created with the ugly hack\n                // and perform another ugly hack out of neccessity\n                window.frames[iframe.name].focus()\n                let script = document.createElement('script')\n                script.innerHTML = 'window.print()'\n                ihead.append(script)\n            } else {\n                // proper method\n                iframe.contentWindow.focus()\n                iframe.contentWindow.print()\n            }\n\n        }, opt.printDelay)\n    }\n\n}\n\nexport default Print"]}